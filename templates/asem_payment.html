{% extends "asem.html" %}
{% block content %}
    <input type="hidden" value="{{start}}" id="start_4" />
    <input type="hidden" value="{{end}}" id="end_4"/>
    <input type="hidden" value="{{location}}" id="location_4"/>
    <input type="hidden" value="{{hotel.objectId}}" id="hotel_4"/>
    <input type="hidden" value="{{room.objectId}}" id="room_4"/>
    <input type="hidden" value="{{days}}" id="days_4"/>
    <input type="hidden" value="{{total}}" id="total_4"/>
    <input type="hidden" value="{{user.objectId}}" id="user_4"/>
    <div style="height:20px"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                {% if user %}
                <div class="row">
                    <div class="col-md-6">
                        <a href="http://asem11.mn/"><img src='img/asem.png' style="width:100%;"></a>
                    </div>
                    <div class="col-md-6">
                        <br/>
                        <img src="img/stripe-secure.png" alt="Image Alternative text" title="Image Title" />
                        <br/>
                        <br/>
                        <form>
                            <a style="width: 100%" id="show-news-edit" class="popup-text btn btn-primary" href="#update-dialog"
                                data-effect="mfp-zoom-out">Pay with card</a>
                        </form>
                    </div>
                </div>
                <div class="mfp-with-anim mfp-hide mfp-dialog mfp-search-dialog" id="update-dialog">
                    <form action="response.php" class="cc-form" id="card_payment_form" method="POST" accept-charset="utf-8">
                        <div class="clearfix">
                            <div class="form-group form-group-cc-number">
                                <label>Card number</label>
                                <input id="card" name="card_number" minlength=19 class="form-control" placeholder="xxxx xxxx xxxx xxxx" required type="text" />
                                <span class="cc-card-icon"></span>
                                <input id="card_type" min="19" name="card_type" type="hidden" />
                            </div>
                            <div class="form-group form-group-cc-cvc">
                                <label>CVC</label>
                                <input id="{{card.objectId}}"
                                name="cvc" minlength=3 class="form-control" required placeholder="xxxx" type="text"  />
                            </div>
                        </div>
                        <div class="clearfix">
                            <div class="form-group form-group-cc-name">
                                <label>Card holder name</label>
                                <input id="card_name" class="form-control"
                                name="card_holder_name" required type="text" />
                            </div>
                            <div class="form-group form-group-cc-date">
                                <label> Expiration date	 </label>
                                <input id="valid" class="form-control"
                                name="expired_date" required placeholder="mm/yy" type="text" />
                            </div>
                        </div>
                        <div class="alert alert-warning" id="alert_3">
                            <button class="close" type="button" data-dismiss="alert"><span aria-hidden="true">×</span>
                            </button>
                            <p class="text-small" id="alert_text_2">Invalid expired date</p>
                        </div>
                        <div>
                            <input type="submit" value="Check out" class="btn btn-primary" />
                        </div>
                    </form>
                </div>
                {% else %}
                <div class="col-md-6 small-hidden">
                    <a href="http://asem11.mn/"><img src='img/asem.png' style="width:100%;"></a>
                </div>
                <div class="col-md-6">
                    <h3>Login</h3>
                    <form>
                        <div class="form-group form-group-icon-left"><i class="fa fa-user input-icon input-icon-show"></i>
                            <label>Email</label>
                            <input class="form-control" placeholder="@" type="text" id="email"/>
                        </div>
                        <div class="form-group form-group-icon-left"><i class="fa fa-lock input-icon input-icon-show"></i>
                            <label>Password</label>
                            <input class="form-control" type="password" placeholder="*****" id="password"/>
                        </div>
                        <div id="RecaptchaField1" class="form-group"></div>
                        <div class="alert alert-danger" id='login-alert'>
                            <button class="close" type="button" data-dismiss="alert"><span aria-hidden="true">×</span>
                            </button>
                            <p class="text-small"></p>
                        </div>
                        <input class="btn btn-primary" type="button" value="Login" id="login"/>
                        <a class="popup-text" id="forgot_text" href="#forgot-dialog" data-effect="mfp-zoom-out">Forgot password?</a>
                    </form>
                    <br />
                    <div class="alert alert-success hidden" id="register-success1">
                        <button class="close" type="button" data-dismiss="alert"><span aria-hidden="true">×</span>
                        </button>
                        <p class="text-small"></p>
                    </div>
                    <div class="alert alert-danger hidden" id='login-alert1'>
                        <button class="close" type="button" data-dismiss="alert"><span aria-hidden="true">×</span>
                        </button>
                        <p class="text-small"></p>
                    </div>
                    <div class="mfp-with-anim mfp-hide mfp-dialog mfp-search-dialog" id="forgot-dialog">
                        <form>
                            <div class="form-group form-group-icon-left"><i class="fa fa-user input-icon input-icon-show"></i>
                                <label>Please write your registered email address</label>
                                <input class="form-control" placeholder="example@example.com" type="text" id="forgot_email"/>
                            </div>
                            <div class="alert alert-success" id="forget_success">
                                <button class="close" type="button" data-dismiss="alert"><span aria-hidden="true">×</span>
                                </button>
                                <p class="text-small"></p>
                            </div>
                            <div class="alert alert-danger" id='forget_danger'>
                                <button class="close" type="button" data-dismiss="alert"><span aria-hidden="true">×</span>
                                </button>
                                <p class="text-small"></p>
                            </div>
                            <div id="RecaptchaField2" class="form-group"></div>
                            <input class="btn btn-primary" type="button" value="илгээх" id="forgot_password"/>
                        </form>
                    </div>
                </div>
                <hr>
                {% endif %}
            </div>
            <div class="col-md-4">
                <div class="booking-item-payment">
                    <header class="clearfix">
                        <a class="booking-item-payment-img" href="#">
                            <img src="{{hotel.cover_image}}" style="width:100%" alt="Image Alternative text" title="hotel 1" />
                        </a>
                        <h5 class="booking-item-payment-title"><a href="#">{{hotel.name}}</a></h5>
                        <ul class="icon-group booking-item-rating-stars">
                            {% for i in range(1, hotel.stars) %}
                            <li><i class="fa fa-star"></i></li>   
                            {% endfor %}
                        </ul>
                        <small ><i class="fa fa-map-marker"></i>{{hotel.address}}</small>
                    </header>
                    <ul class="booking-item-payment-details">
                        <li>
                        <h5>Total days of stay: {{days}}</h5>
                        <div class="booking-item-payment-date">
                            <p class="booking-item-payment-date-day">{{start}}</p>
                            <p class="booking-item-payment-date-weekday">{{day_start}}</p>
                        </div><i class="fa fa-arrow-right booking-item-payment-date-separator"></i>
                        <div class="booking-item-payment-date">
                            <p class="booking-item-payment-date-day">{{end}}</p>
                            <p class="booking-item-payment-date-weekday">{{day_end}}</p>
                        </div>
                        </li>
                        <li>
                        <h5>Room</h5>    
                        <ul class="booking-item-payment-price">
                            {%for room in rooms%}
                            <li>
                            <p class="booking-item-payment-price-title">{{room.name}}</p>
                            <p class="booking-item-payment-price-title" style="margin-left:10px">{{room.qty}}<small>/rooms</small></p>
                            <p class="booking-item-payment-price-amount">${{room.sub}}<small>/per day</small></p>
                            </li>
                            {%endfor%}
                        </ul>
                        </li>
                        <li>
                        {% if pickup == "budget" %}
                        <h5>Pickup</h5>
                        <ul class="booking-item-payment-price">
                            <li>
                            <p class="booking-item-payment-price-title"></p>
                            <p class="booking-item-payment-price-title" style="margin-left:10px"><small>BUDGET</small></p>
                            <p class="booking-item-payment-price-amount">$<small>25</small></p>
                            </li>
                        </ul>
                        {% endif %}
                        {% if pickup == "vip" %}
                        <h5>Pickup</h5>
                        <ul class="booking-item-payment-price">
                            <li>
                            <p class="booking-item-payment-price-title"></p>
                            <p class="booking-item-payment-price-title" style="margin-left:10px"><small>VIP</small></p>
                            <p class="booking-item-payment-price-amount">$<small>75</small></p>
                            </li>
                        </ul>
                        {% endif %}
                        </li>
                        <li>
                        {% if sim == "sim1" %}
                        <h5>Tour SIM</h5>
                        <ul class="booking-item-payment-price">
                            <li>
                            <p class="booking-item-payment-price-title"></p>
                            <p class="booking-item-payment-price-title" style="margin-left:10px"><small>Single SIM</small></p>
                            <p class="booking-item-payment-price-amount">$<small>20</small></p>
                            </li>
                        </ul>
                        {% endif %}
                        {% if sim == "sim2" %}
                        <h5>Tour SIM</h5>
                        <ul class="booking-item-payment-price">
                            <li>
                            <p class="booking-item-payment-price-title"></p>
                            <p class="booking-item-payment-price-title" style="margin-left:10px"><small>Single PLUS SIM</small></p>
                            <p class="booking-item-payment-price-amount">$<small>30</small></p>
                            </li>
                        </ul>
                        {% endif %}
                        {% if sim == "sim3" %}
                        <h5>Tour SIM</h5>
                        <ul class="booking-item-payment-price">
                            <li>
                            <p class="booking-item-payment-price-title"></p>
                            <p class="booking-item-payment-price-title" style="margin-left:10px"><small>Double SIM</small></p>
                            <p class="booking-item-payment-price-amount">$<small>50</small></p>
                            </li>
                        </ul>
                        {% endif %}
                        </li>
                    </ul>
                    <p class="booking-item-payment-total">Total amount: <span>US$ {{total}}</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="gap"></div>
    </div>
    <input type="hidden" name="recaptcha1" id="recaptcha1" value="" />
    <input type="hidden" name="recaptcha2" id="recaptcha2" value="" />
    <script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit&hl=mn"
    async defer>
    </script>
{% endblock %}
{% block scripting %}
    {{parent()}}
    <script type="text/javascript">
    var checkuser = false;
    {% if user %}
        checkuser = true;
    {% endif %}
    $("#card_payment_form").submit(function(event){
            $("#asempay").after('<div id="loading"></div>');
            $("#asempay").addClass('disabled');
            var d = new Date();
            var y = d.getFullYear();
            var m = d.getMonth();
            var res  = $("#valid").val().split("/");

            if(res[1] <= y && res[0] <= m){
                $("#alert_3").show();
                event.preventDefault();
            }else{
                
            } 
    });
    </script>
    <script type="text/javascript" src="js/payment/asem_payment.js" charset="utf-8"></script>
{% endblock %}
